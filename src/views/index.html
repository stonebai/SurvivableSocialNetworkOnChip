<!DOCTYPE html>
<html ng-app="MyApp">
<head>
    <!-- Required meta tags-->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!-- Your app title -->
    <title>SSNOC Team A2</title>
    <!-- Path to Framework7 Library CSS, iOS Theme -->
    <link rel="stylesheet" href="/public/framework7/css/framework7.ios.min.css">
    <!-- Path to Framework7 color related styles, iOS Theme -->
    <!--<link rel="stylesheet" href="/public/framework7/css/framework7.ios.colors.min.css">-->
    <!-- Path to your custom app styles-->
    <!--<link rel="stylesheet" href="/public/framework7/css/my-app.css">-->
    <!--<link rel="stylesheet" href="/public/framework7/css/framework7.material.min.css">-->
    <!-- It should be included After main Framework7 styles -->
    <link rel="stylesheet" href="/public/framework7/css/framework7.material.colors.min.css">
</head>
<body>

    <!-- Right panel -->
    <div class="panel panel-left panel-reveal" ng-controller="SidePanelController">
        <div class="content-block">
            <p>Current User: <span ng-bind="username" id="current_username"></span></p>
            <!-- Click on link with "close-panel" class will close panel -->
            <p><a href="#" class="close-panel" ng-click="openPage('public_chat')">Public Chat</a></p>
            <p><a href="#" ng-click="logout()">Logout</a></p>
            <p><a href="#" ng-click="openPage('about')" class="close-panel" >About</a></p>
            <p><a href="#announcements" class="close-panel" ng-click="openAnnouncement()">Announcements</a></p>
            <p><a href="#" class="close-panel" ng-click="openPage('search')">Search</a></p>
            <div class="content-block-title">All Users</div>
            <div class="list-block">
                <ul style="background: #111">
                    <a ng-repeat="u in users" href="#" class="item-link close-panel" ng-click="openPrivateChat(u)">
                        <li class="item-content">
                            <div class="item-media"><i class="icon icon-bars" ng-class="{
                                'color-green': u.lastStatusCode=='GREEN',
                                'color-red': u.lastStatusCode=='RED',
                                'color-orange': u.lastStatusCode=='YELLOW'
                            }" ></i></div>
                            <div class="item-inner">
                                <div class="item-title" ng-bind="u.username"
                                     ng-class="{'color-white':u.online, 'color-gray':!u.online}">Item title</div>
                            </div>
                        </li>
                    </a>
                </ul>
            </div>
        </div>
    </div>

    <!-- LOGIN Page -->
    <div class="login-screen">
        <!-- Default view-page layout -->
        <div class="view">
            <div class="page" ng-controller="LoginController">
                <!-- page-content has additional login-screen content -->
                <div class="page-content login-screen-content">
                    <div class="login-screen-title">My App</div>
                    <!-- Login form -->
                    <form>
                        <div class="list-block">
                            <ul>
                                <li class="item-content">
                                    <div class="item-media"><i class="icon icon-form-name"></i></div>
                                    <div class="item-inner">
                                        <div class="item-input">
                                            <input type="text" name="username" placeholder="Username" ng-model="user.name">
                                        </div>
                                    </div>
                                </li>
                                <li class="item-content">
                                    <div class="item-media"><i class="icon icon-form-password"></i></div>
                                    <div class="item-inner">
                                        <div class="item-input">
                                            <input type="password" name="password" placeholder="Password" ng-model="user.password">
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="list-block">
                            <ul>
                                <li>
                                    <a href="#" class="item-link list-button" ng-click="login(user)">Sign In</a>
                                </li>
                            </ul>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Status selection list -->
    <!-- Status selection list -->
    <div class="popover popover-links">
    <div class="popover-angle"></div>
    <div class="popover-inner" ng-controller="StatusPopoverController">
      <div class="list-block">
        <ul>
          <li><a href="#" class="list-button item-link" ng-click="select('GREEN')">GREEN</a></li>
          <li><a href="#" class="list-button item-link" ng-click="select('YELLOW')">YELLOW</a></li>
          <li><a href="#" class="list-button item-link" ng-click="select('RED')">RED</a></li>
        </ul>
      </div>
    </div>
  </div>

    <!-- Status bar overlay for full screen mode (PhoneGap) -->
    <!-- Views -->
    <div class="views">
        <!-- Your main view, should have "view-main" class -->
        <div class="view view-main">

            <!-- Top Navbar-->
            <div class="navbar" ng-controller="NavbarController">
                <div class="navbar-inner">
                    <!-- We need cool sliding animation on title element, so we have additional "sliding" class -->
                    <div class="left">
                        <a href="#" ng-if="!isPagePushed" class="open-panel link icon-only" ng-click="clickNav()">
                            <i class="icon icon-bars"></i>
                        </a>
                        <a href="#" ng-if="isPagePushed" class="link icon-only" ng-click="clickBack()">
                            <i class="icon icon-back"></i>
                        </a>
                    </div>
                    <div class="center sliding">Public Chat</div>
                    <div class="right" data-page="users">
                        <a href="#" data-popover=".popover-links" class="link open-popover" ng-bind="currentStatus"></a>
                    </div>
                </div>
            </div>


            <!-- Pages container, because we use fixed-through navbar and toolbar, it has additional appropriate classes-->
            <div class="pages navbar-through toolbar-through">
                <!-- Page, "data-page" contains page name -->
                <div data-page="public_chat" class="page" ng-controller="PublicChatController">
                    <!-- messagebar -->
                    <div class="toolbar messagebar">
                        <div class="toolbar-inner">
                            <textarea placeholder="Message" ng-model="post" ng-keyup="keyUp($event, post)"></textarea>
                            <a href="#" class="link" ng-click="sendMessage(post)" ng-disabled="post.trim()==''">Send</a>
                        </div>
                    </div>
                    <!-- Scrollable page content -->
                    <div class="page-content">
                        <div class="messages" id="public_messages">
                        </div>
                    </div>
                </div>

                <div data-page="private_chat" class="page cached" ng-controller="PrivateChatController">
                    <!-- messagebar -->
                    <div class="toolbar messagebar">
                        <div class="toolbar-inner">
                            <textarea placeholder="Message" ng-model="post" ng-keyup="keyUp($event, post)"></textarea>
                            <a href="#" class="link" ng-click="sendMessage(post)" ng-disabled="post.trim()==''">Send</a>
                        </div>
                    </div>
                    <!-- Scrollable page content -->
                    <div class="page-content">
                        <div class="messages" id="private_messages">
                        </div>
                    </div>
                </div>


                <div data-page="about" class="page cached">
                    <div class="page-content">
                        <h1>Survivable Social Network</h1>
                        <p>
                            We call it Survivable Social Network on a Chip, or SSNoC.
                            Imagine that a natural disaster struck your neighborhood. There is a blackout - no electricity. The cellular network is down. You have a mobile phone,  but you can’t use it. Most of your neighbors have smartphones, which are now useless.  Power and cellular service may be restored soon, but in the meantime you wish to touch base with your neighbors, exchange information with them, ask for help, and tell them you’re ok. What do you do?
                            You plug in the SSNoC to a battery pack, which powers up and instantly creates a small wifi network. It has limited range, but it will do for now.
                            Your neighbors can connect to SSNoC wifi through their smartphones, fire up their mobile browser, sign up on the SSNoC, and start sharing and receiving information.
                            They should not need to download an app to access SSNoC. Well, there is no internet, no cellular service, no power, nothing.
                        </p>
                    </div>
                </div>

                <div data-page="announcements" class="page cached" ng-controller="AnnouncementController">
                    <!-- messagebar -->
                    <div class="toolbar messagebar">
                        <div class="toolbar-inner">
                            <textarea placeholder="Announcement" ng-model="newAnnouncement"></textarea>
                            <a href="#" class="link" ng-click="postAnnouncement(newAnnouncement)" ng-disabled="post.trim()==''">Send</a>
                        </div>
                    </div>
                    <div class="page-content">
                        <div class="card" ng-repeat="announcement in announcements">
                            <div class="card-header">{{announcement.author}}</div>
                            <div class="card-content" style="word-wrap: break-word;"><div class="card-content-inner">{{announcement.content}}</div></div>
                            <div class="card-footer">{{announcement.dateFormat}}</div>
                        </div>
                    </div>
                </div>


                <div data-page="search" class="page cached" ng-controller="SearchController">
                    <div class="page-content">
                        <div class="content-block-title">Labels and inputs</div>
                        <div class="list-block">
                            <ul>
                                <li id="search_keyword_li">
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title label">Keyword:</div>
                                            <div class="item-input">
                                                <input type="text" ng-model="keyword" placeholder="Search Criteria">
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li id="search_status_li">
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title label">Status:</div>
                                            <div class="item-input">
                                                <a href="#" id="status_for_search">GREEN</a>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title label">Context:</div>
                                            <div class="item-input">
                                                <a href="#" id="search_context">UserName</a>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <!-- Select -->
                                <li>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title label">Display</div>
                                            <div class="item-input">
                                                <a href="#" id="search_display_num">10</a>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>

                        <a href="#" class="button button-big button-fill"
                           ng-click="onClickSearchButton()">Search Now!</a>
                    </div>
                </div>

                <div data-page="search_results" class="page cached" ng-controller="SearchResultsController">
                    <div class="page-content">
                        <div class="content-block-title">Search Results ({{ results.length }} items) </div>
                        <div class="list-block media-list" ng-if="isMediaList">
                            <ul>
                                <li ng-repeat="m in results">
                                    <a href="#" class="item-link item-content" ng-click="showDetailMesssage(m)">
                                        <div class="item-inner">
                                            <div class="item-title-row">
                                                <div class="item-title" ng-bind="m.sender"></div>
                                                <div class="item-after" ng-bind="m.time"></div>
                                            </div>
                                            <div class="item-text" ng-bind="m.content"></div>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </div>

                        <div class="list-block" ng-if="!isMediaList">
                            <ul>
                                <li class="item-content" ng-repeat="u in results">
                                    <div class="item-media"><i class="icon icon-bars" ng-class="{
                                        'color-green': u.lastStatusCode=='GREEN',
                                        'color-red': u.lastStatusCode=='RED',
                                        'color-orange': u.lastStatusCode=='YELLOW'}"></i>
                                    </div>
                                    <div class="item-inner">
                                        <div class="item-title"
                                             ng-class="{'color-black': u.online,
                                                        'color-gray': !u.online}"
                                             ng-bind="u.username"></div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- About Popup -->
                <div class="popup popup-search-msg">
                    <div class="content-block">
                        <p><a href="#" class="close-popup">Close popup</a></p>
                        <p class="full-search-msg"></p>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <!-- Path to Framework7 Library JS-->
    <script type="text/javascript" src="/public/framework7/js/framework7.min.js"></script>
    <!-- Path to your app js-->
    <script src="/public/js/angular.min.js"></script>
    <script src="/public/js/socket.io.js"></script>
    <script type="text/javascript" src="/public/js/config.js"></script>
    <script type="text/javascript" src="/public/js/service/BootService.js"></script>
    <script type="text/javascript" src="/public/js/service/UserService.js"></script>
    <script type="text/javascript" src="/public/js/service/MessageService.js"></script>
    <script type="text/javascript" src="/public/js/controller/LoginController.js"></script>
    <script type="text/javascript" src="/public/js/controller/NavbarController.js"></script>
    <script type="text/javascript" src="/public/js/controller/PublicChatController.js"></script>
    <script type="text/javascript" src="/public/js/controller/SidePanelController.js"></script>
    <script type="text/javascript" src="/public/js/controller/PrivateChatController.js"></script>
    <script type="text/javascript" src="/public/js/controller/StatusPopoverController.js"></script>
    <script type="text/javascript" src="/public/js/controller/AnnouncementController.js"></script>
    <script type="text/javascript" src="/public/js/controller/SearchController.js"></script>
    <script type="text/javascript" src="/public/js/controller/SearchResultsController.js"></script>
</body>
</html>

